{% extends "base.html" %}
{% load staticfiles %}
{% load mathfilters %}

{% block content %}

	<!-- Competition Title -->
	<h2>
		{{ competition }}
	</h2>

	<!-- Show the league table. -->
	<table class="stats-table league">

		<!-- Table header row. -->
		<tr>
			<th>Pos</th>
			<th></th>
			<th>P</th>
			<th>W</th>
			<th>D</th>
			<th>L</th>
			<th>F</th>
			<th>A</th>
			<th>{{ table_tie_breaker }}</th>
			<th>Pts</th>
		</tr>

	{% for team in league_table %}

		<!-- Set up the CSS classes for rows which need to be highlighted. -->
		{% if forloop.counter in top_primary %}
			<tr class="top-primary">
		{% elif forloop.counter in top_secondary %}
			<tr class="top-secondary">
		{% elif forloop.counter in bottom_secondary %}
			<tr class="bottom-secondary">
		{% elif forloop.counter in bottom_primary %}
			<tr class="bottom-primary">
		{% endif %}

				<!-- Show the team's record. -->
				<td class="center-align">
					{{ forloop.counter }}
				</td>

				<td>
					<a class="table-link" href="{% url 'team_season' team.abbreviation|lower competition.season %}">
						{{ team.name }}
					</a>
				</td>

				<td class="center-align">
					{{ team.games_played|floatformat:0 }}
				</td>

				<td class="center-align">
					{{ team.games_won|floatformat:0 }}
				</td>

				<td class="center-align">
					{{ team.games_drawn|floatformat:0 }}
				</td>

				<td class="center-align">
					{{ team.games_lost|floatformat:0 }}
				</td>

				<td class="center-align">
					{{ team.goals_for|floatformat:0 }}
				</td>

				<td class="center-align">
					{{ team.goals_against|floatformat:0 }}
				</td>

				<td class="center-align">
					{% if table_tie_breaker == "GA" %}
						{{ team.goal_average|floatformat:2 }}
					{% else %}
						{{ team.goal_difference|floatformat:0 }}
					{% endif %}
				</td>

				<td class="center-align">
					{{ team.points|floatformat:0 }}
				</td>

			</tr>

	{% endfor %}

	</table>

	<section class="competition-details">

		<!-- Show the points adjustments if there are any. -->
		{% if adjustments %}

			{% for adjustment in adjustments %}
				*
				{{ adjustment.team }} 
					{% if adjustment.points > 0 %}
						awarded
					{% else %}
						deducted
					{% endif %}
				{{ adjustment.points|abs }}
					{% if adjustment.points|abs == 1 %}
						point.
					{% else %}points{% endif %}{% if forloop.last %}.{% else %},{% endif %}
			{% endfor %}

		{% endif %}

	</section>

{% endblock %}